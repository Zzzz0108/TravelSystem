# ğŸ—„ï¸ æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤æŒ‡å—

## ğŸ“‹ å¤‡ä»½çš„é‡è¦æ€§

åœ¨æ‰§è¡Œæ•°æ®åº“å‡çº§å‰ï¼Œ**å¼ºçƒˆå»ºè®®**å…ˆå¤‡ä»½æ•°æ®åº“ï¼Œä»¥é˜²å‡çº§è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜å¯ä»¥å¿«é€Ÿæ¢å¤ã€‚

## ğŸ› ï¸ å¤‡ä»½æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨å¤‡ä»½è„šæœ¬ï¼ˆæ¨èï¼‰

#### macOS/Linux ç”¨æˆ·
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x database/backup_database.sh

# æ‰§è¡Œå¤‡ä»½ï¼ˆä½¿ç”¨é»˜è®¤æ•°æ®åº“åå’Œç”¨æˆ·åï¼‰
./database/backup_database.sh

# æˆ–è€…æŒ‡å®šæ•°æ®åº“åå’Œç”¨æˆ·å
./database/backup_database.sh travel_system_v1 root
```

#### Windows ç”¨æˆ·
```cmd
# ç›´æ¥åŒå‡»è¿è¡Œï¼Œæˆ–å‘½ä»¤è¡Œæ‰§è¡Œ
database\backup_database.bat

# æˆ–è€…æŒ‡å®šå‚æ•°
database\backup_database.bat travel_system_v1 root
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨å¤‡ä»½å‘½ä»¤

#### å¤‡ä»½æ•´ä¸ªæ•°æ®åº“
```bash
mysqldump -u root -p --databases travel_system_v1 > backup_$(date +%Y%m%d_%H%M%S).sql
```

#### å¤‡ä»½ç‰¹å®šè¡¨
```bash
mysqldump -u root -p travel_system_v1 travel_animations > backup_travel_animations.sql
```

#### å¤‡ä»½æ•°æ®åº“ç»“æ„ï¼ˆä¸å«æ•°æ®ï¼‰
```bash
mysqldump -u root -p --no-data travel_system_v1 > backup_structure.sql
```

## ğŸ”„ æ¢å¤æ–¹æ³•

### æ¢å¤æ•´ä¸ªæ•°æ®åº“
```bash
mysql -u root -p < backup_20241201_143022.sql
```

### æ¢å¤ç‰¹å®šè¡¨
```bash
mysql -u root -p travel_system_v1 < backup_travel_animations.sql
```

### æ¢å¤æ•°æ®åº“ç»“æ„
```bash
mysql -u root -p travel_system_v1 < backup_structure.sql
```

## ğŸ“ å¤‡ä»½æ–‡ä»¶ç®¡ç†

### å¤‡ä»½æ–‡ä»¶å‘½åè§„åˆ™
```
backup_[æ•°æ®åº“å]_[æ—¥æœŸ]_[æ—¶é—´].sql
ä¾‹å¦‚ï¼šbackup_travel_system_v1_20241201_143022.sql
```

### å¤‡ä»½ç›®å½•ç»“æ„
```
database/
â”œâ”€â”€ backups/                    # å¤‡ä»½æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ backup_travel_system_v1_20241201_143022.sql
â”‚   â”œâ”€â”€ backup_travel_system_v1_20241201_150000.sql
â”‚   â””â”€â”€ ...
â”œâ”€â”€ upgrade_travel_animations.sql    # å‡çº§è„šæœ¬
â”œâ”€â”€ rollback_travel_animations.sql   # å›æ»šè„šæœ¬
â””â”€â”€ verify_upgrade.sql               # éªŒè¯è„šæœ¬
```

### è‡ªåŠ¨æ¸…ç†
- è„šæœ¬ä¼šè‡ªåŠ¨ä¿ç•™æœ€è¿‘10ä¸ªå¤‡ä»½æ–‡ä»¶
- æ—§çš„å¤‡ä»½æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤
- èŠ‚çœç£ç›˜ç©ºé—´

## ğŸš¨ æ³¨æ„äº‹é¡¹

### å¤‡ä»½å‰æ£€æŸ¥
1. **ç¡®è®¤æ•°æ®åº“è¿æ¥**ï¼šç¡®ä¿å¯ä»¥æ­£å¸¸è¿æ¥æ•°æ®åº“
2. **æ£€æŸ¥ç£ç›˜ç©ºé—´**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜å‚¨å¤‡ä»½æ–‡ä»¶
3. **é€‰æ‹©åˆé€‚æ—¶é—´**ï¼šåœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œå¤‡ä»½
4. **æµ‹è¯•æ¢å¤**ï¼šé‡è¦æ•°æ®å»ºè®®å…ˆæµ‹è¯•æ¢å¤æµç¨‹

### å¤‡ä»½æ–‡ä»¶å®‰å…¨
1. **å­˜å‚¨ä½ç½®**ï¼šå°†å¤‡ä»½æ–‡ä»¶å­˜å‚¨åœ¨å®‰å…¨çš„ä½ç½®
2. **è®¿é—®æƒé™**ï¼šé™åˆ¶å¤‡ä»½æ–‡ä»¶çš„è®¿é—®æƒé™
3. **å®šæœŸéªŒè¯**ï¼šå®šæœŸéªŒè¯å¤‡ä»½æ–‡ä»¶çš„å®Œæ•´æ€§
4. **å¼‚åœ°å¤‡ä»½**ï¼šé‡è¦æ•°æ®å»ºè®®å¼‚åœ°å¤‡ä»½

## ğŸ“Š å¤‡ä»½ç­–ç•¥å»ºè®®

### æ—¥å¸¸å¤‡ä»½
- **é¢‘ç‡**ï¼šæ¯å¤©ä¸€æ¬¡
- **ä¿ç•™æ—¶é—´**ï¼š7å¤©
- **ç±»å‹**ï¼šå®Œæ•´å¤‡ä»½

### å‡çº§å‰å¤‡ä»½
- **é¢‘ç‡**ï¼šå‡çº§å‰ç«‹å³æ‰§è¡Œ
- **ä¿ç•™æ—¶é—´**ï¼šæ°¸ä¹…ä¿ç•™ï¼ˆç›´åˆ°ç¡®è®¤å‡çº§æˆåŠŸï¼‰
- **ç±»å‹**ï¼šå®Œæ•´å¤‡ä»½

### å®šæœŸå¤‡ä»½
- **é¢‘ç‡**ï¼šæ¯å‘¨ä¸€æ¬¡
- **ä¿ç•™æ—¶é—´**ï¼š1ä¸ªæœˆ
- **ç±»å‹**ï¼šå®Œæ•´å¤‡ä»½

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æƒé™ä¸è¶³
```bash
# é”™è¯¯ï¼šAccess denied
# è§£å†³ï¼šä½¿ç”¨æœ‰è¶³å¤Ÿæƒé™çš„ç”¨æˆ·
mysqldump -u root -p --databases travel_system_v1 > backup.sql
```

#### 2. ç£ç›˜ç©ºé—´ä¸è¶³
```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ¸…ç†æ—§æ–‡ä»¶
rm -f old_backup_*.sql
```

#### 3. å¤‡ä»½æ–‡ä»¶æŸå
```bash
# æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§
file backup_*.sql

# å°è¯•æ¢å¤
mysql -u root -p < backup_*.sql
```

### è”ç³»æ”¯æŒ
å¦‚æœé‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥é”™è¯¯æ—¥å¿—
2. ç¡®è®¤MySQLç‰ˆæœ¬å…¼å®¹æ€§
3. è”ç³»æŠ€æœ¯æ”¯æŒ

## âœ… å‡çº§æµç¨‹å»ºè®®

### å®Œæ•´å‡çº§æµç¨‹
1. **å¤‡ä»½æ•°æ®åº“**ï¼šä½¿ç”¨å¤‡ä»½è„šæœ¬
2. **éªŒè¯å¤‡ä»½**ï¼šæ£€æŸ¥å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
3. **æ‰§è¡Œå‡çº§**ï¼šè¿è¡Œå‡çº§è„šæœ¬
4. **éªŒè¯å‡çº§**ï¼šè¿è¡ŒéªŒè¯è„šæœ¬
5. **æµ‹è¯•åŠŸèƒ½**ï¼šæµ‹è¯•æ–°åŠŸèƒ½æ˜¯å¦æ­£å¸¸
6. **æ¸…ç†å¤‡ä»½**ï¼šç¡®è®¤æ— è¯¯åæ¸…ç†ä¸´æ—¶å¤‡ä»½

### å¿«é€Ÿå›æ»šæµç¨‹
1. **å‘ç°é—®é¢˜**ï¼šå‡çº§åå‘ç°é—®é¢˜
2. **åœæ­¢æœåŠ¡**ï¼šåœæ­¢åº”ç”¨æœåŠ¡
3. **æ‰§è¡Œå›æ»š**ï¼šè¿è¡Œå›æ»šè„šæœ¬
4. **æ¢å¤æ•°æ®**ï¼šä»å¤‡ä»½æ–‡ä»¶æ¢å¤
5. **é‡å¯æœåŠ¡**ï¼šé‡æ–°å¯åŠ¨åº”ç”¨

## ğŸ¯ æ€»ç»“

æ•°æ®åº“å¤‡ä»½æ˜¯ç³»ç»Ÿå‡çº§çš„é‡è¦ä¿éšœï¼Œå»ºè®®ï¼š

- âœ… **å¿…é¡»æ‰§è¡Œ**ï¼šå‡çº§å‰å¤‡ä»½
- âœ… **å®šæœŸæ‰§è¡Œ**ï¼šæ—¥å¸¸å¤‡ä»½
- âœ… **æµ‹è¯•æ¢å¤**ï¼šéªŒè¯å¤‡ä»½æœ‰æ•ˆæ€§
- âœ… **å®‰å…¨å­˜å‚¨**ï¼šä¿æŠ¤å¤‡ä»½æ–‡ä»¶

è®°ä½ï¼š**æœ‰å¤‡æ— æ‚£ï¼Œæ— å¤‡å¿…æ‚£ï¼** ğŸ›¡ï¸ 